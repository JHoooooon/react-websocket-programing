# 구현하면서 막힌점 정리

## movie-theater

별로 코드상 어렵지는 않았다.
문제는 원인모를 동작이다.

모든 동작은 `StrictMode` 에서 등장했으며, 책에서 하란대로 하지 않아 생긴  
문제이기도 하다.

> 근데 아무리 그렇다고 해도 `<StrictMode />` 삭제는 아니지 않은가?
> 더 좋은 개발환경을 위해 제공해주는 모드인데...

`StrictMode` 는 `2번` 렌더링 된다.
이로이해 생기는 문제는 다음과 같았다.

1. `strict` 모드에 의해 2번 렌더링 된다
2. `첫번째 렌더링시` 에 `emit` 이후 `cleanup` 함수가 실행되면  
   `socket.disconnect` 가 된다
3. `두번째 렌더링시` 에 `disconnection 된 socket` 에서 `emit` 을 하므로 동작하지  
   않는다.
4. `HomeComponent` 로 페이지 전환시, 다시 `socket.connect` 가 이루어지므로,  
   `SeatContainer` 에서 `emit` 한 `data` 를 이때 받는다.

앞으로 `useEffect` 시 아무리 보아도 문제가 없는데, 이상 동작하면  
`StrictMode` 로 인한 동작도 확인해 봐야한다.

이 프로젝트가 흥미로운게 현재는 `JSON` 으로 했지만, 실제 영화사이트들은  
더 복잡한 구조이다.

각 영화관마다, 영화마다, 시간마다, 동석자수 마다 처리해주어야 한다.
또한, 영화관마다 각 관의 좌석 배치도도 다를것이다.

이러한 부분을 어떻게 통합하고, 관리하는지 생각해보는것이 좋을 듯 싶다.
`sql` 상으로 각 `좌석` 을 일일히 생성하고, `영화관` 의 `관 id` 랑 연결해서  
배치하는 방식으로 구현했을듯 싶기도하고...
과연 `JSON` 으로 일일히 만들까?  
싶은 생각도 든다.

`sql` 에 더 익숙해져야 겠다...

## google-docs

